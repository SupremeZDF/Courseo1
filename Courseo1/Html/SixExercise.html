<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="JS/jquery-3.3.1.min.js"></script>
    <script src="JS/layui/layui.js"></script>
    <script src="CSS/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <link href="JS/layui/css/layui.css" rel="stylesheet" />
    <link href="CSS/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" />
</head>

<body>
    <form id="fromd" action="https://localhost:5001/api/ImageTool/ImageToOne" enctype="multipart/form-data" onsubmit="return OnSubmitFunction(this);return false;">
        <div class="form-group">
            <label for="exampleInputPassword1">Password</label>
            <input name="pswd" type="text" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <div class="form-group">
            <label for="exampleInputFile">File input</label>
            <input name="file" type="file" multiple id="exampleInputFiles">
        </div>
        <button type="submit" class="btn btn-default">ONSubmit</button>
    </form>

    <form id="myForm" action="" method="post">
        <input type="text" name="name">名字
        <input type="password" name="psw">密码
        <input type="submit" value="提交">
    </form>

    <button type="submit" onclick="SubmitFunction()" class="btn btn-default">Submit</button>
    <script>
        //Onsubmit
        function OnSubmitFunction(obj) {
            var log = new FormData(document.getElementById("fromd"));
            console.log(log.get("pswd"));

            console.log();

            console.log(typeof(log.get("file")))

            var dd = new FormData();

            $.ajax({
                type: "post",
                contentType: false,
                processData: false, //默认为true 默认情况下会将发送的数据序列化以适应默认的内容类型application/x-www-form-urlencoded
                url: "https://localhost:5001/api/ImageTool/ImageToOne",
                data: log,
                success: function() {

                },
                error: function() {

                }
            })

            var ds = document
                .getElementById("exampleInputFiles").files;

            for (var i = 0; i < ds.length; i++) {
                console.log(i);
                dd.append("files", ds[i]);
            }
            console.log(JSON.stringify(dd));
            return false;
        }

        //上传文件
        function SubmitFunction() {
            // 获取页面已有的一个form表单
            var form = document.getElementById("myForm");
            // 用表单来初始化
            var formData = new FormData(form);
            console.log(formData);
            // 我们可以根据name来访问表单中的字段
            var name = formData.get("name"); // 获取名字
            console.log(name);
            var psw = formData.get("psw"); // 获取密码
            console.log(psw);
            // 当然也可以在此基础上，添加其他数据
            formData.append("token", "kshdfiwi3rh");
            console.log(formData.getAll(""));
            console.log(formData.length);

            // console.log(obj);
            // console.log(obj.getElementsByTagName("input"));
            // var d = obj.getElementsByTagName("input");
            // var fike;
            // $(d).each(function() {
            //     console.log(this);
            //     $(this).attr("name");
            //     if ($(this).attr("name") == "file") {
            //         fike = $(this);
            //     }
            // });
            // console.log(fike);

            // var dfile = fike.files[0].name;
            // console.log(dfile);

            //document.getElementById
            //getElementById()var fid = document.getElementById();
            // var filed = document.getElementsByName("file");
            // console.log()

            // var d = document.getElementById("exampleInputFiles").files;
            // console.log(d);

            // var fromdat = new FormData();
            // for (var i = 0; i < fromdat.length; i++) {
            //     fromdat.append()
            // }
        }
    </script>
</body>

</html>